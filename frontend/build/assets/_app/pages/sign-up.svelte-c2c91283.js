import{S as F,i as q,s as A,e as b,t as R,c as k,a as O,g as C,d as y,f as P,F as m,h as B,k as g,n as v,b as o,R as d,L as w,T as L,Z as M,J,U as Z}from"../chunks/vendor-b7a51d2f.js";import{d as D,c as G,e as H,r as K,a as Q,b as V}from"../chunks/store-b1b2bb32.js";import{g as W}from"../chunks/navigation-51f4a605.js";import"../chunks/singletons-12a22614.js";function z(e){let n,s;return{c(){n=b("p"),s=R(e[1])},l(t){n=k(t,"P",{});var u=O(n);s=C(u,e[1]),u.forEach(y)},m(t,u){P(t,n,u),m(n,s)},p(t,u){u&2&&B(s,t[1])},d(t){t&&y(n)}}}function X(e){let n,s,t,u,f,S,h,T,c,N,i,_,l,I,U,j,r=e[1]&&z(e);return{c(){r&&r.c(),n=g(),s=b("form"),t=b("input"),u=g(),f=b("input"),S=g(),h=b("input"),T=g(),c=b("input"),N=g(),i=b("input"),_=g(),l=b("button"),I=R("Submit"),this.h()},l(p){r&&r.l(p),n=v(p),s=k(p,"FORM",{});var a=O(s);t=k(a,"INPUT",{type:!0,name:!0,placeholder:!0}),u=v(a),f=k(a,"INPUT",{type:!0,name:!0,placeholder:!0}),S=v(a),h=k(a,"INPUT",{type:!0,name:!0,placeholder:!0}),T=v(a),c=k(a,"INPUT",{type:!0,name:!0,placeholder:!0}),N=v(a),i=k(a,"INPUT",{type:!0,name:!0,placeholder:!0}),_=v(a),l=k(a,"BUTTON",{});var E=O(l);I=C(E,"Submit"),E.forEach(y),a.forEach(y),this.h()},h(){o(t,"type","text"),o(t,"name","name"),o(t,"placeholder","name"),o(f,"type","text"),o(f,"name","surname"),o(f,"placeholder","surname"),o(h,"type","text"),o(h,"name","username"),o(h,"placeholder","username"),o(c,"type","email"),o(c,"name","email"),o(c,"placeholder","email"),o(i,"type","password"),o(i,"name","password"),o(i,"placeholder","password")},m(p,a){r&&r.m(p,a),P(p,n,a),P(p,s,a),m(s,t),d(t,e[0].name),m(s,u),m(s,f),d(f,e[0].surname),m(s,S),m(s,h),d(h,e[0].username),m(s,T),m(s,c),d(c,e[0].email),m(s,N),m(s,i),d(i,e[0].password),m(s,_),m(s,l),m(l,I),U||(j=[w(t,"input",e[3]),w(f,"input",e[4]),w(h,"input",e[5]),w(c,"input",e[6]),w(i,"input",e[7]),w(s,"submit",L(function(){M(e[2](e[0]))&&e[2](e[0]).apply(this,arguments)}))],U=!0)},p(p,[a]){e=p,e[1]?r?r.p(e,a):(r=z(e),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null),a&1&&t.value!==e[0].name&&d(t,e[0].name),a&1&&f.value!==e[0].surname&&d(f,e[0].surname),a&1&&h.value!==e[0].username&&d(h,e[0].username),a&1&&c.value!==e[0].email&&d(c,e[0].email),a&1&&i.value!==e[0].password&&d(i,e[0].password)},i:J,o:J,d(p){r&&r.d(p),p&&y(n),p&&y(s),U=!1,Z(j)}}}function Y(e,n,s){let t={},u=null;const f=async i=>{console.log(i);try{const _=await fetch("http://localhost:5000/auth/create-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(console.log(_),_.status>=300)throw await _.json();const l=await _.json();console.log(l),localStorage.setItem("access_token",l.access_token),localStorage.setItem("refresh_token",l.refresh_token);const I=JSON.stringify(l.user);localStorage.setItem("user",I),D.set(l.user),G.set(l.access_token),H.set(l.refresh_token);const U=l.user.roles;for(const j of U)switch(j.name){case"user":V.set(!0);break;case"eventOrganizer":Q.set(!0);break;case"admin":K.set(!0);break}W("/profile")}catch(_){s(1,u=_)}};function S(){t.name=this.value,s(0,t)}function h(){t.surname=this.value,s(0,t)}function T(){t.username=this.value,s(0,t)}function c(){t.email=this.value,s(0,t)}function N(){t.password=this.value,s(0,t)}return[t,u,f,S,h,T,c,N]}class se extends F{constructor(n){super();q(this,n,Y,X,A,{})}}export{se as default};
