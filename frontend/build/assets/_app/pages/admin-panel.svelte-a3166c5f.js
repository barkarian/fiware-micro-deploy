import{S as q,i as F,s as G,e as b,t as v,c as g,a as K,g as k,d as c,f,F as y,h as M,k as J,n as B,L as I,l as E,J as V,K as D,A as H,b as z,x as w,j as Q,m as W,o as X,u as A,v as Y,r as Z,w as $,V as oe}from"../chunks/vendor-b7a51d2f.js";import{e as x,c as ee}from"../chunks/store-b1b2bb32.js";function te(r){let e,n;return{c(){e=b("li"),n=v(r[6])},l(t){e=g(t,"LI",{});var l=K(e);n=k(l,r[6]),l.forEach(c)},m(t,l){f(t,e,l),y(e,n)},p(t,l){l&64&&M(n,t[6])},d(t){t&&c(e)}}}function se(r){let e,n,t=r[0].email+"",l,o,s,a,_,p,N,R,P;function S(u,i){return u[3]==!1?ie:ue}let T=S(r),h=T(r);function C(u,i){return u[4]==!1?ce:_e}let U=C(r),m=U(r);function L(u,i){return u[5]==!1?pe:fe}let j=L(r),d=j(r);return{c(){e=b("li"),n=v("user:"),l=v(t),o=v(`:
        `),h.c(),s=J(),m.c(),a=J(),d.c(),_=J(),p=b("button"),N=v("Remove this user\u{1F4A8}")},l(u){e=g(u,"LI",{});var i=K(e);n=k(i,"user:"),l=k(i,t),o=k(i,`:
        `),h.l(i),s=B(i),m.l(i),a=B(i),d.l(i),_=B(i),p=g(i,"BUTTON",{});var O=K(p);N=k(O,"Remove this user\u{1F4A8}"),O.forEach(c),i.forEach(c)},m(u,i){f(u,e,i),y(e,n),y(e,l),y(e,o),h.m(e,null),y(e,s),m.m(e,null),y(e,a),d.m(e,null),y(e,_),y(e,p),y(p,N),R||(P=I(p,"click",r[7],{once:!0}),R=!0)},p(u,i){i&1&&t!==(t=u[0].email+"")&&M(l,t),T===(T=S(u))&&h?h.p(u,i):(h.d(1),h=T(u),h&&(h.c(),h.m(e,s))),U===(U=C(u))&&m?m.p(u,i):(m.d(1),m=U(u),m&&(m.c(),m.m(e,a))),j===(j=L(u))&&d?d.p(u,i):(d.d(1),d=j(u),d&&(d.c(),d.m(e,_)))},d(u){u&&c(e),h.d(),m.d(),d.d(),R=!1,P()}}}function ue(r){let e,n,t,l,o;return{c(){e=b("input"),t=v(`
            \u274C Admin`),this.h()},l(s){e=g(s,"INPUT",{type:!0}),t=k(s,`
            \u274C Admin`),this.h()},h(){z(e,"type","radio"),e.__value=n={roleName:"admin",userId:r[0]._id},e.value=e.__value,r[9][1].push(e)},m(s,a){f(s,e,a),e.checked=e.__value===r[2],f(s,t,a),l||(o=I(e,"change",r[10]),l=!0)},p(s,a){a&1&&n!==(n={roleName:"admin",userId:s[0]._id})&&(e.__value=n,e.value=e.__value),a&4&&(e.checked=e.__value===s[2])},d(s){s&&c(e),r[9][1].splice(r[9][1].indexOf(e),1),s&&c(t),l=!1,o()}}}function ie(r){let e,n,t,l,o;return{c(){e=b("input"),t=v(`
            Admin`),this.h()},l(s){e=g(s,"INPUT",{type:!0}),t=k(s,`
            Admin`),this.h()},h(){z(e,"type","radio"),e.__value=n={roleName:"admin",userId:r[0]._id},e.value=e.__value,r[9][0].push(e)},m(s,a){f(s,e,a),e.checked=e.__value===r[1],f(s,t,a),l||(o=I(e,"change",r[8]),l=!0)},p(s,a){a&1&&n!==(n={roleName:"admin",userId:s[0]._id})&&(e.__value=n,e.value=e.__value),a&2&&(e.checked=e.__value===s[1])},d(s){s&&c(e),r[9][0].splice(r[9][0].indexOf(e),1),s&&c(t),l=!1,o()}}}function _e(r){let e,n,t,l,o;return{c(){e=b("input"),t=v(`
            \u274C User`),this.h()},l(s){e=g(s,"INPUT",{type:!0}),t=k(s,`
            \u274C User`),this.h()},h(){z(e,"type","radio"),e.__value=n={roleName:"user",userId:r[0]._id},e.value=e.__value,r[9][1].push(e)},m(s,a){f(s,e,a),e.checked=e.__value===r[2],f(s,t,a),l||(o=I(e,"change",r[12]),l=!0)},p(s,a){a&1&&n!==(n={roleName:"user",userId:s[0]._id})&&(e.__value=n,e.value=e.__value),a&4&&(e.checked=e.__value===s[2])},d(s){s&&c(e),r[9][1].splice(r[9][1].indexOf(e),1),s&&c(t),l=!1,o()}}}function ce(r){let e,n,t,l,o;return{c(){e=b("input"),t=v(`
            User`),this.h()},l(s){e=g(s,"INPUT",{type:!0}),t=k(s,`
            User`),this.h()},h(){z(e,"type","radio"),e.__value=n={roleName:"user",userId:r[0]._id},e.value=e.__value,r[9][0].push(e)},m(s,a){f(s,e,a),e.checked=e.__value===r[1],f(s,t,a),l||(o=I(e,"change",r[11]),l=!0)},p(s,a){a&1&&n!==(n={roleName:"user",userId:s[0]._id})&&(e.__value=n,e.value=e.__value),a&2&&(e.checked=e.__value===s[1])},d(s){s&&c(e),r[9][0].splice(r[9][0].indexOf(e),1),s&&c(t),l=!1,o()}}}function fe(r){let e,n,t,l,o;return{c(){e=b("input"),t=v(`
            \u274C Event Organizer`),this.h()},l(s){e=g(s,"INPUT",{type:!0}),t=k(s,`
            \u274C Event Organizer`),this.h()},h(){z(e,"type","radio"),e.__value=n={roleName:"eventOrganizer",userId:r[0]._id},e.value=e.__value,r[9][1].push(e)},m(s,a){f(s,e,a),e.checked=e.__value===r[2],f(s,t,a),l||(o=I(e,"change",r[14]),l=!0)},p(s,a){a&1&&n!==(n={roleName:"eventOrganizer",userId:s[0]._id})&&(e.__value=n,e.value=e.__value),a&4&&(e.checked=e.__value===s[2])},d(s){s&&c(e),r[9][1].splice(r[9][1].indexOf(e),1),s&&c(t),l=!1,o()}}}function pe(r){let e,n,t,l,o;return{c(){e=b("input"),t=v(`
            Event Organizer`),this.h()},l(s){e=g(s,"INPUT",{type:!0}),t=k(s,`
            Event Organizer`),this.h()},h(){z(e,"type","radio"),e.__value=n={roleName:"eventOrganizer",userId:r[0]._id},e.value=e.__value,r[9][0].push(e)},m(s,a){f(s,e,a),e.checked=e.__value===r[1],f(s,t,a),l||(o=I(e,"change",r[13]),l=!0)},p(s,a){a&1&&n!==(n={roleName:"eventOrganizer",userId:s[0]._id})&&(e.__value=n,e.value=e.__value),a&2&&(e.checked=e.__value===s[1])},d(s){s&&c(e),r[9][0].splice(r[9][0].indexOf(e),1),s&&c(t),l=!1,o()}}}function he(r){let e,n,t=r[6]&&te(r),l=r[0]&&se(r);return{c(){t&&t.c(),e=J(),l&&l.c(),n=E()},l(o){t&&t.l(o),e=B(o),l&&l.l(o),n=E()},m(o,s){t&&t.m(o,s),f(o,e,s),l&&l.m(o,s),f(o,n,s)},p(o,[s]){o[6]?t?t.p(o,s):(t=te(o),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null),o[0]?l?l.p(o,s):(l=se(o),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:V,o:V,d(o){t&&t.d(o),o&&c(e),l&&l.d(o),o&&c(n)}}}function me(r,e,n){let t,l;D(r,x,u=>n(15,t=u)),D(r,ee,u=>n(16,l=u));let{user:o}=e,s,a,_=!1,p=!1,N=!1,R=null;const P=async u=>{try{const i=await fetch("http://localhost:5000/api/admin/add-role",{method:"POST",headers:{"Content-Type":"application/json",access_token:l,refresh_token:t},body:JSON.stringify(u)});if(i.status>=300)throw await i.json();const O=await i.json();switch(u.roleName){case"user":n(4,p=!0);break;case"eventOrganizer":n(5,N=!0);break;case"admin":n(3,_=!0);break}console.log({parseRes:O})}catch(i){console.error(i)}},S=async u=>{try{const i=await fetch("http://localhost:5000/api/admin/remove-role",{method:"POST",headers:{"Content-Type":"application/json",access_token:l,refresh_token:t},body:JSON.stringify(u)});if(i.status>=300)throw await i.json();const O=await i.json();switch(u.roleName){case"user":n(4,p=!1);break;case"eventOrganizer":n(5,N=!1);break;case"admin":n(3,_=!1);break}console.log({parseRes:O})}catch(i){console.error(i)}},T=async()=>{try{const u=await fetch(`http://localhost:5000/api/admin/user/${o.id}`,{method:"DELETE",headers:{"Content-Type":"application/json",access_token:l,refresh_token:t}});if(u.status>=300)throw await u.json();console.log({response:u});const i=await u.json();console.log({parseRes:i}),n(0,o=null),n(6,R=i)}catch(u){console.error(u)}};H(async()=>{const u=o.roles;for(const i of u)switch(i.name){case"user":n(4,p=!0);break;case"eventOrganizer":n(5,N=!0);break;case"admin":n(3,_=!0);break}});const h=[[],[]];function C(){s=this.__value,n(1,s)}function U(){a=this.__value,n(2,a)}function m(){s=this.__value,n(1,s)}function L(){a=this.__value,n(2,a)}function j(){s=this.__value,n(1,s)}function d(){a=this.__value,n(2,a)}return r.$$set=u=>{"user"in u&&n(0,o=u.user)},r.$$.update=()=>{r.$$.dirty&2&&s&&(console.log({addRoleAction:s}),P(s)),r.$$.dirty&4&&a&&(console.log({removeRoleAction:a}),S(a))},[o,s,a,_,p,N,R,T,C,h,U,m,L,j,d]}class de extends q{constructor(e){super();F(this,e,me,he,G,{user:0})}}function le(r,e,n){const t=r.slice();return t[1]=e[n],t}function ne(r){let e,n,t=r[0],l=[];for(let s=0;s<t.length;s+=1)l[s]=re(le(r,t,s));const o=s=>A(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=E()},l(s){for(let a=0;a<l.length;a+=1)l[a].l(s);e=E()},m(s,a){for(let _=0;_<l.length;_+=1)l[_].m(s,a);f(s,e,a),n=!0},p(s,a){if(a&1){t=s[0];let _;for(_=0;_<t.length;_+=1){const p=le(s,t,_);l[_]?(l[_].p(p,a),w(l[_],1)):(l[_]=re(p),l[_].c(),w(l[_],1),l[_].m(e.parentNode,e))}for(Z(),_=t.length;_<l.length;_+=1)o(_);$()}},i(s){if(!n){for(let a=0;a<t.length;a+=1)w(l[a]);n=!0}},o(s){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)A(l[a]);n=!1},d(s){oe(l,s),s&&c(e)}}}function re(r){let e,n;return e=new de({props:{user:r[1]}}),{c(){Q(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,l){X(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.user=t[1]),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){A(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function ve(r){let e,n,t=r[0]&&ne(r);return{c(){t&&t.c(),e=E()},l(l){t&&t.l(l),e=E()},m(l,o){t&&t.m(l,o),f(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&w(t,1)):(t=ne(l),t.c(),w(t,1),t.m(e.parentNode,e)):t&&(Z(),A(t,1,1,()=>{t=null}),$())},i(l){n||(w(t),n=!0)},o(l){A(t),n=!1},d(l){t&&t.d(l),l&&c(e)}}}function ke(r,e,n){let{users:t}=e;return r.$$set=l=>{"users"in l&&n(0,t=l.users)},[t]}class be extends q{constructor(e){super();F(this,e,ke,ve,G,{users:0})}}function ge(r){let e,n;return e=new be({props:{users:r[0]}}),{c(){Q(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,l){X(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.users=t[0]),e.$set(o)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){A(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function ye(r,e,n){let t,l;D(r,x,a=>n(1,t=a)),D(r,ee,a=>n(2,l=a));let o=null;const s=async()=>{const a=await fetch("http://localhost:5000/api/admin/all-users",{method:"GET",headers:{"Content-Type":"application/json",access_token:l,refresh_token:t}});if(a.status>=300)throw await a.json();const _=await a.json();n(0,o=_)};return H(async()=>{await s()}),[o]}class Oe extends q{constructor(e){super();F(this,e,ye,ge,G,{})}}export{Oe as default};
